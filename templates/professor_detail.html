{% extends 'base.html' %}
{% block title %}{{ professor.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- –§–û–¢–û –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–Ø -->
        <div class="col-md-4 text-center">
            {% if professor.photo %}
                <img src="{{ professor.photo.url }}" class="img-fluid rounded shadow" alt="–§–æ—Ç–æ {{ professor.name }}" width="200">
            {% else %}
                <img src="/static/default_photo.jpg" class="img-fluid rounded shadow" alt="–§–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" width="200">
            {% endif %}
        </div>

        <!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ï -->
        <div class="col-md-8">
            <h2>{{ professor.name }}</h2>
            <p class="text-muted">
                –ö–∞—Ñ–µ–¥—Ä—ã:
                {% for department in professor.departments.all %}
                    <span class="badge bg-primary">{{ department.name }}</span>
                {% endfor %}
            </p>

            <!-- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ -->
            <h4>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</h4>
            <ul class="list-group mb-3">
                <li class="list-group-item">üë®‚Äçüè´ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º: <strong>{{ avg_rating.professionalism|default:"N/A"|floatformat:1 }}</strong></li>
                <li class="list-group-item">üì¢ –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è: <strong>{{ avg_rating.clarity|default:"N/A"|floatformat:1 }}</strong></li>
                <li class="list-group-item">üòä –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å—Ç—É–¥–µ–Ω—Ç–∞–º: <strong>{{ avg_rating.attitude|default:"N/A"|floatformat:1 }}</strong></li>
            </ul>
        </div>
    </div>

    <hr>

    <!-- –§–û–†–ú–ê –û–¢–ó–´–í–ê -->
    <h4>{% if user_feedback %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤{% else %}–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤{% endif %}</h4>
    <form method="post" class="card p-3 shadow-sm">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label">üë®‚Äçüè´ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º (1-5)</label>
            {{ form.professionalism }}
        </div>
        <div class="mb-3">
            <label class="form-label">üì¢ –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è (1-5)</label>
            {{ form.clarity }}
        </div>
        <div class="mb-3">
            <label class="form-label">üòä –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å—Ç—É–¥–µ–Ω—Ç–∞–º (1-5)</label>
            {{ form.attitude }}
        </div>
        <div class="mb-3">
            <label class="form-label">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
            {{ form.comment }}
        </div>
        <button type="submit" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>

    <hr>

    <!-- –°–ü–ò–°–û–ö –û–¢–ó–´–í–û–í -->
    <h4>–û—Ç–∑—ã–≤—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h4>
    {% for feedback in feedbacks %}
        <div class="card mb-2 p-3 shadow-sm">
            <p>‚≠ê –ü—Ä–æ—Ñ: {{ feedback.professionalism }}, üì¢ –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å: {{ feedback.clarity }}, üòä –û—Ç–Ω–æ—à–µ–Ω–∏–µ: {{ feedback.attitude }}</p>
            <p class="text-muted">üïí {{ feedback.created_at|date:"d M Y, H:i" }}</p>
            {% if feedback.comment %}
                <blockquote class="blockquote">{{ feedback.comment }}</blockquote>
            {% endif %}
        </div>
    {% empty %}
        <p class="text-muted">–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endfor %}
</div>
{% endblock %}
